(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{375:function(e,t,n){},450:function(e,t){},559:function(e,t){},887:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(19),c=n.n(a),i=n(24),o=n(5),l=n.n(o),u=n(13),d=n(11),j=n(9),h=n(12),p=n(15),b=(n(375),n(30)),O=n(23),f=n(353),x="/api/",m=n.n(f).a.create({withCredentials:!0}),v=function(e,t){return k(e,"GET",t)},g=function(e,t){return k(e,"POST",t)},y=function(e,t){return k(e,"PUT",t)},w=function(e,t){return k(e,"DELETE",t)};function k(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(l.a.mark((function e(t){var n,r,s,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",r=a.length>2&&void 0!==a[2]?a[2]:null,e.prev=2,e.next=5,m({url:"".concat(x).concat(t),method:n,data:r,params:"GET"===n?r:null});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S={query:function(e){return C.apply(this,arguments)},getById:function(e){return D.apply(this,arguments)},save:function(e){return A.apply(this,arguments)},remove:function(e){return _.apply(this,arguments)}};function C(){return(C=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("stay/",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("cant get stays",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function D(){return(D=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("stay/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("cant get stay",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function A(){return(A=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t._id){e.next=7;break}return e.next=4,y("stay/".concat(t._id),t);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,g("stay/",t);case 9:return e.abrupt("return",e.sent);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("cant save stay",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function _(){return(_=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("stay/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("not authorized!",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{price:"",amenities:""};return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.query(e);case 3:r=t.sent,n({type:"SET_STAYS",stays:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("StaysActions: err in getStays",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function U(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n({type:"SET_FILTER",filterBy:e})}catch(r){console.log("StaysActions: err in getFilter",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var T=n(1);function E(e){var t=e.title,n=e.imgUrl,r=e.onSelect,s="https://res.cloudinary.com/duhcvi6p4/image/upload/v1622304703/".concat(n,".jpg");return Object(T.jsxs)("div",{onClick:function(){return r(t)},className:"".concat(t,"-card card"),children:[Object(T.jsx)("div",{className:"img-container",children:Object(T.jsx)("img",{src:s,alt:"user"})}),Object(T.jsx)("div",{className:"bg-filter ".concat(t),children:Object(T.jsx)("h3",{children:t})})]})}var I=n(6),P=n(354),F=n.n(P),R=(n(414),n(415),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e={dots:!0,centerPadding:"20px",nextArrow:Object(T.jsx)(L,{}),prevArrow:Object(T.jsx)(B,{})},t=this.props.imgsSrc;return Object(T.jsx)("section",{className:"image-carousel",children:Object(T.jsx)(F.a,Object(I.a)(Object(I.a)({},e),{},{children:t.map((function(e,t){return Object(T.jsx)("div",{children:Object(T.jsx)("img",{src:e,alt:"house img"})},t)}))}))})}}]),n}(r.Component));function L(e){var t=e.className,n=e.style,r=e.onClick;return Object(T.jsx)("div",{className:t,style:Object(I.a)(Object(I.a)({},n),{},{right:"10px"}),onClick:r})}function B(e){var t=e.className,n=e.style,r=e.onClick;return Object(T.jsx)("div",{className:t,style:Object(I.a)(Object(I.a)({},n),{},{left:"10px",zIndex:1,onHover:{opacity:1}}),onClick:r})}var z=n(18),Y=n(16);function H(e){var t=e.stay,n=e.isShowReviews,r=t.reviews?t.reviews.length:0,s=t.reviews?t.reviews.reduce((function(e,t){return e+t.rate}),0)/t.reviews.length:0;s%1!==0&&s.toString().split(".")[1].length>1&&(s=s.toFixed(2));var a=n?" reviews":"";return Object(T.jsxs)("section",{className:"stay-rate flex",children:[Object(T.jsx)(z.a,{icon:Y.o}),Object(T.jsxs)("div",{children:[!s&&Object(T.jsx)("span",{children:"New"}),0!==s&&Object(T.jsxs)("span",{children:[s,Object(T.jsxs)("span",{className:"num-of-review",children:["(",r+a,")"]})]})]})]})}function q(e){var t=e.txt,n=e.numOfChars,r=t.length<n?"":"...",s=t.slice(0,n)+r;return Object(T.jsx)("p",{className:"long-txt",children:s})}function W(e){var t=e.stay;return Object(T.jsx)("section",{className:"stay-preview",children:Object(T.jsxs)(i.b,{to:"stay/".concat(t._id),children:[Object(T.jsx)("div",{className:"stay-image-container",children:Object(T.jsx)(R,{imgsSrc:t.imgUrls})}),Object(T.jsx)(H,{stay:t}),Object(T.jsxs)("p",{children:[t.type," in ",t.loc.country]}),Object(T.jsx)(q,{txt:t.summary,numOfChars:28}),Object(T.jsxs)("p",{children:[Object(T.jsxs)("span",{className:"price",children:["$",t.price]})," / night"]})]})})}function K(e){var t=e.stays;return t?Object(T.jsx)("section",{className:"stay-list",children:t.map((function(e){return Object(T.jsx)(W,{stay:e},e._id)}))}):Object(T.jsx)("h1",{children:"reloading"})}var $=n(355),G=n.n($),J=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={color:"#ff385c"},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(T.jsx)("div",{className:"pulse-loader",children:Object(T.jsx)(G.a,{color:this.state.color,loading:!0,size:150})})}}]),n}(r.Component),V=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={city:""},e.onSelect=function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({city:n});case 2:return t.next=4,e.props.setFilter(e.state);case 4:e.props.history.push("/stay");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),document.body.classList.add("header-home-mode-open"),window.onscroll=function(){window.pageYOffset>=85?document.body.classList.remove("header-home-mode-open"):(document.body.classList.add("header-home-mode-open"),document.body.classList.remove("header-onclick-mode"))}}},{key:"componentWillUnmount",value:function(){window.onscroll=null,document.body.classList.remove("header-home-mode-open"),document.body.classList.remove("header-onclick-mode")}},{key:"render",value:function(){var e=this,t=this.props.stays.slice(0,5),n=["amsterdam_nqxozm","paris_lljj5s","new-york_en6f3a","tokyo_cl5jez","london_ddezqi","barcelona_aq6xpb"];return t?Object(T.jsxs)("section",{className:"stay-home main-container full",children:[Object(T.jsx)("div",{className:"home-hero flex justify-center full",children:Object(T.jsxs)("div",{className:"hero-txt-container",children:[Object(T.jsxs)("h2",{children:["The best journey ",Object(T.jsx)("br",{}),"takes you home."]}),Object(T.jsx)(i.b,{to:"/stay",children:Object(T.jsx)("button",{children:"Explore now!"})})]})}),Object(T.jsx)("h2",{children:"Popular locations"}),Object(T.jsx)("div",{className:"city-card-container",children:["amsterdam","paris","new-york","tokyo","london","barcelona"].map((function(t,r){return Object(T.jsx)(E,{onSelect:e.onSelect,title:t,imgUrl:n[r]},r)}))}),Object(T.jsxs)("div",{className:"best-loc",children:[Object(T.jsxs)("div",{className:"best-loc-header flex justify-space-between",children:[Object(T.jsx)("h2",{children:"Top rated homes"}),Object(T.jsx)(i.b,{to:"/stay",children:"Show more"})]}),Object(T.jsx)("div",{className:"top-rated-container",children:Object(T.jsx)(K,{stays:t})})]}),Object(T.jsxs)("section",{children:[Object(T.jsx)("h2",{children:"Homie's family"}),Object(T.jsx)("div",{className:"become-host full",children:Object(T.jsxs)("div",{className:"host-container flex",children:[Object(T.jsxs)("div",{className:"content-container flex",children:[Object(T.jsx)("h2",{children:"Become a host"}),Object(T.jsxs)("p",{children:["Earn extra income with Homie,",Object(T.jsx)("br",{})," join us and milion other hosts to unlock new opportunities, by sharing your space.",Object(T.jsx)("br",{}),"hosting can help you turn your extra space into extra income and pursue more of what you love."]}),Object(T.jsx)("button",{children:"Join us now!"})]}),Object(T.jsx)("div",{className:"img-container flex"})]})})]})]}):Object(T.jsx)(J,{})}}]),n}(r.Component);var X={getStays:M,setFilter:U},Q=Object(O.b)((function(e){return{stays:e.stayModule.stays,filterBy:e.stayModule.filterBy}}),X)(V),Z=n(21),ee={uploadImg:function(e){var t="https://api.cloudinary.com/v1_1/".concat("duhcvi6p4","/image/upload"),n=new FormData;return n.append("file",e.target.files[0]),n.append("upload_preset","khbfu8ly"),fetch(t,{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}};var te={login:function(e){return ce.apply(this,arguments)},logout:function(){return oe.apply(this,arguments)},signup:function(e){return ie.apply(this,arguments)},getUsers:function(){return ne.apply(this,arguments)},getById:function(e){return re.apply(this,arguments)},remove:function(e){return se.apply(this,arguments)},update:function(e){return ae.apply(this,arguments)},getLoggedinUser:ue};function ne(){return(ne=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("user");case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("cant get users",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function re(){return(re=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("user/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("cant get user",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function se(){return(se=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("user/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("not authorized!",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ae(){return(ae=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("user/".concat(t._id),t);case 3:n=e.sent,ue()._id===n._id&&le(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("cant update",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ce(){return(ce=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("auth/login",t);case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",le(n));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("user not found",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ie(){return(ie=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(I.a)(Object(I.a)({},t),{},{isHost:!1,imgUrl:(null===t||void 0===t?void 0:t.imgUrl)||"https://ozgrozer.github.io/100k-faces/0/0/000924.jpg"}),e.next=4,g("auth/signup",n);case 4:return r=e.sent,e.abrupt("return",le(r));case 8:e.prev=8,e.t0=e.catch(0),console.log("cant add new user",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function oe(){return(oe=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,sessionStorage.clear(),e.next=4,g("auth/logout");case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),console.log("no loged user",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function le(e){return sessionStorage.setItem("loggedinUser",JSON.stringify(e)),e}function ue(){return JSON.parse(sessionStorage.getItem("loggedinUser"))}function de(){return function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.logout();case 3:t({type:"SET_USER",user:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("UserActions: err in logout",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}var je=n(356),he=n.n(je),pe=function(){var e=null,t={setup:function(){return Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:e=he()("");case 3:case"end":return t.stop()}}),t)})))()},on:function(n,r){return Object(u.a)(l.a.mark((function s(){return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e){s.next=3;break}return s.next=3,t.setup();case 3:e.on(n,r);case 4:case"end":return s.stop()}}),s)})))()},off:function(n){var r=arguments;return Object(u.a)(l.a.mark((function s(){var a;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=r.length>1&&void 0!==r[1]?r[1]:null,e){s.next=4;break}return s.next=4,t.setup();case 4:a?e.off(n,a):e.removeAllListeners(n);case 5:case"end":return s.stop()}}),s)})))()},emit:function(n,r){return Object(u.a)(l.a.mark((function s(){return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e){s.next=3;break}return s.next=3,t.setup();case 3:e.emit(n,r);case 4:case"end":return s.stop()}}),s)})))()},terminate:function(){e=null}};return t}();var be=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isSignup:"",isOpen:!1,userInfo:{fullname:"",username:"",password:"",imgUrl:""},credentials:{username:"",password:""}},e.handleClickToggle=function(){e.setState({isOpen:!e.state.isOpen})},e.handleChange=function(){var t=Object(u.a)(l.a.mark((function t(n){var r,s,a,c,i,o,u,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target,s=r.name,a=r.value,c=e.state,i=c.isSignup,o=c.credentials,u=c.userInfo,"login"!==i){t.next=8;break}e.setState({credentials:Object(I.a)(Object(I.a)({},o),{},Object(Z.a)({},s,a))}),t.next=14;break;case 8:if(e.setState({userInfo:Object(I.a)(Object(I.a)({},u),{},Object(Z.a)({},s,a))}),"file"!==r.type){t.next=14;break}return t.next=12,ee.uploadImg(n);case 12:d=t.sent,e.setState({userInfo:Object(I.a)(Object(I.a)({},u),{},{imgUrl:d.url})});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmitUser=function(){var t=Object(u.a)(l.a.mark((function t(n){var r,s,a,c,i,o,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state,s=r.isSignup,a=r.userInfo,c=r.credentials,i=e.props,o=i.onSignup,u=i.onLogin,"login"!==s){t.next=8;break}return t.next=6,u(c);case 6:t.next=10;break;case 8:return t.next=10,o(a);case 10:e.props.loggedInUser&&pe.emit("LOGIN",e.props.loggedInUser),e.props.history.push("/");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e="/login"===this.props.match.path?"login":"signup";this.setState({isSignup:e})}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("header-home-mode-open"),document.body.classList.remove("header-onclick-mode")}},{key:"render",value:function(){var e=this.state.isSignup;return Object(T.jsxs)("div",{className:"log-page-container flex align-center justify-center full",children:[Object(T.jsx)("div",{className:"form-filter"}),"signup"===e&&Object(T.jsxs)("section",{className:"sign-up flex",children:[Object(T.jsx)(z.a,{icon:Y.r,size:"3x"}),Object(T.jsxs)("form",{className:"flex",onSubmit:this.onSubmitUser,children:[Object(T.jsx)("label",{htmlFor:"fullname",children:"Fullname"}),Object(T.jsx)("input",{onChange:this.handleChange,type:"text",name:"fullname",id:"fullname"}),Object(T.jsx)("label",{htmlFor:"username",children:"Username"}),Object(T.jsx)("input",{onChange:this.handleChange,type:"text",name:"username",id:"username"}),Object(T.jsx)("label",{htmlFor:"password",children:"Password"}),Object(T.jsx)("input",{onChange:this.handleChange,type:"password",autoComplete:"none",name:"password",id:"password"}),Object(T.jsxs)("div",{className:"btn-container flex ",children:[Object(T.jsxs)("div",{className:"btn-upload",children:[Object(T.jsx)("label",{name:"img-upload",htmlFor:"upload",children:"upload your image"}),Object(T.jsx)("input",{id:"upload",type:"file",onChange:this.handleChange})]}),Object(T.jsx)("button",{className:"btn",children:"Submit"})]})]})]}),"login"===e&&Object(T.jsxs)("section",{className:"log-in flex",children:[Object(T.jsx)(z.a,{icon:Y.r,size:"3x"}),Object(T.jsxs)("form",{onSubmit:this.onSubmitUser,className:"flex",children:[Object(T.jsx)("label",{htmlFor:"username",children:"Username"}),Object(T.jsx)("input",{onChange:this.handleChange,type:"text",autoComplete:"none",name:"username",id:"username"}),Object(T.jsx)("label",{htmlFor:"password",children:"Password"}),Object(T.jsx)("input",{onChange:this.handleChange,autoComplete:"none",type:"password",name:"password",id:"password"}),Object(T.jsx)("button",{className:"btn",children:"Submit"})]})]})]})}}]),n}(r.Component);var Oe={onLogout:de,onSignup:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te.signup(e);case 3:r=t.sent,n({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in signup",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},onLogin:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te.login(e);case 3:r=t.sent,n({type:"SET_USER",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},fe=Object(O.b)((function(e){return{loggedInUser:e.userModule.loggedInUser}}),Oe)(be),xe=n(56),me=n(362),ve=n(905),ge=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isOpen:!1},e.closePopover=function(){e.setState({isOpen:!1})},e.filterAndClose=function(t){e.props.onFilter(t),e.closePopover()},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(T.jsxs)("div",{className:"popover-container-staytype",children:[Object(T.jsx)("button",{className:"btn-group-button",onClick:function(){return e.setState({isOpen:!0})},children:"Stay type"}),this.state.isOpen&&Object(T.jsx)(ve.a,{onClickAway:this.closePopover,children:Object(T.jsxs)("div",{className:"stay-filter-popover flex column",children:[Object(T.jsx)("h4",{children:"4 types of compounds at your service."}),Object(T.jsx)(me.a,{options:[{value:"",label:"Any kind"},{value:"Apartment",label:"Apartment"},{value:"Entire home",label:"Entire home"},{value:"Studio",label:"Studio"},{value:"Shared apartment",label:"Shared apartment"}],onChange:this.props.handleChange,classNamePrefix:"select",className:"basic-single"}),Object(T.jsx)("div",{className:"separator"}),Object(T.jsx)("button",{className:"save-filter-btn",onClick:function(t){return e.filterAndClose(t)},children:"Save"})]})})]})}}]),n}(r.Component),ye=n(909),we=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isOpen:!1},e.closePopover=function(){e.setState({isOpen:!1})},e.filterAndClose=function(t){e.props.onFilter(t),e.closePopover()},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.isPets,r=t.isSmoking,s=t.handleChange,a=[n,r],c=["Allow pets","Allow smoking"];return Object(T.jsxs)("div",{className:"popover-container-houserules",children:[Object(T.jsx)("button",{className:"btn-group-button",onClick:function(){return e.setState({isOpen:!0})},children:"House rules"}),this.state.isOpen&&Object(T.jsx)(ve.a,{onClickAway:this.closePopover,children:Object(T.jsxs)("form",{className:"stay-filter-popover flex column",children:[["isPets","isSmoking"].map((function(e,t){return Object(T.jsxs)("label",{htmlFor:"".concat(e,"-id"),children:[Object(T.jsx)(ye.a,{id:"".concat(e,"-id"),name:e,onChange:s,checked:a[t],inputProps:{"aria-label":"controlled-checkbox"},color:"default"}),c[t]]},t)})),Object(T.jsx)("div",{className:"separator"}),Object(T.jsx)("button",{className:"save-filter-btn",onClick:function(t){return e.filterAndClose(t)},children:"Save"})]})})]})}}]),n}(r.Component),ke=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isOpen:!1},e.closePopover=function(){e.setState({isOpen:!1})},e.filterAndClose=function(t){e.props.onFilter(t),e.closePopover()},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.tv,r=t.wifi,s=t.kitchen,a=t.accessibility,c=t.airConditioner,i=t.secured,o=t.fastFood,l=t.parking,u=t.aidKit,d=t.publicTransport,j=["Tv","Wifi","Kitchen","Accessibility","Air conditioner","Secured","Fast food","Parking","Aid Kit","Public transport"],h=[n,r,s,a,c,i,o,l,u,d];return Object(T.jsxs)("div",{className:"popover-container-amenities",children:[Object(T.jsx)("button",{className:"btn-group-button",onClick:function(){return e.setState({isOpen:!0})},children:"Amenities"}),this.state.isOpen&&Object(T.jsx)(ve.a,{onClickAway:this.closePopover,children:Object(T.jsxs)("form",{className:"stay-filter-popover flex column",children:[Object(T.jsx)("div",{className:"amenities-grid",children:["tv","wifi","kitchen","accessibility","airConditioner","secured","fastFood","parking","aidKit","publicTransport"].map((function(t,n){return Object(T.jsxs)("label",{htmlFor:"".concat(t,"-id"),children:[Object(T.jsx)(ye.a,{id:"".concat(t,"-id"),name:t,onChange:e.props.handleChange,inputProps:{"aria-label":"checkbox with default color"},color:"default",checked:h[n]}),j[n]]},n)}))}),Object(T.jsx)("div",{className:"separator"}),Object(T.jsx)("button",{className:"save-filter-btn",onClick:function(t){return e.filterAndClose(t)},children:"Save"})]})})]})}}]),n}(r.Component),Ne=n(915),Se=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isOpen:!1},e.closePopover=function(){e.setState({isOpen:!1})},e.filterAndClose=function(t){e.props.onFilter(t),e.closePopover()},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.minPrice,r=t.maxPrice,s=t.handleChange,a=[n,r];return Object(T.jsxs)("div",{className:"popover-container-priceslider",children:[Object(T.jsx)("button",{className:"btn-group-button",onClick:function(){return e.setState({isOpen:!0})},children:"Price"}),this.state.isOpen&&Object(T.jsx)(ve.a,{onClickAway:this.closePopover,children:Object(T.jsxs)("div",{className:"stay-filter-popover flex column",children:[Object(T.jsx)("h4",{children:"The average nightly price is $652."}),Object(T.jsx)(Ne.a,{max:1500,value:a,onChange:s,valueLabelDisplay:"on","aria-labelledby":"range-slider"}),Object(T.jsx)("div",{className:"separator"}),Object(T.jsx)("button",{className:"save-filter-btn",onClick:function(t){return e.filterAndClose(t)},children:"Save"})]})})]})}}]),n}(r.Component),Ce=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={filterBy:{type:"",minPrice:0,maxPrice:1500,isPets:!1,isSmoking:!1,tv:!1,wifi:!1,kitchen:!1,accessibility:!1,airConditioner:!1,secured:!1,fastFood:!1,parking:!1,aidKit:!1,publicTransport:!1}},e.handleChange=function(t,n){var r,s,a=e.state.filterBy;if(t.label)e.setState({filterBy:Object(I.a)(Object(I.a)({},a),{},{type:t.value})});else if(n&&"mousemove"===t.type){var c=Object(xe.a)(n,2),i=c[0],o=c[1];e.setState({filterBy:Object(I.a)(Object(I.a)({},a),{},{minPrice:i,maxPrice:o})})}else r=t.target.value,s=t.target.name,t.target.checked&&(r=t.target.checked),e.setState({filterBy:Object(I.a)(Object(I.a)({},a),{},Object(Z.a)({},s,r))})},e.onFilter=function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.props.setFilter(e.state.filterBy);case 3:e.props.getStays(e.props.filterBy);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state.filterBy,t=e.type,n=e.minPrice,r=e.maxPrice,s=e.isPets,a=e.isSmoking,c=e.tv,i=e.wifi,o=e.kitchen,l=e.accessibility,u=e.airConditioner,d=e.secured,j=e.fastFood,h=e.parking,p=e.aidKit,b=e.publicTransport,O=this.props.filterBy.city;return Object(T.jsxs)("section",{className:"stay-filter",children:[Object(T.jsx)("h2",{className:"filter-header",children:O?"Stays in ".concat(O):"Our Stays"}),Object(T.jsxs)("div",{className:"btn-group flex",children:[Object(T.jsx)(Se,{minPrice:n,maxPrice:r,handleChange:this.handleChange,onFilter:this.onFilter}),Object(T.jsx)(ge,{type:t,handleChange:this.handleChange,onFilter:this.onFilter}),Object(T.jsx)(we,{isPets:s,isSmoking:a,handleChange:this.handleChange,onFilter:this.onFilter}),Object(T.jsx)(ke,{tv:c,wifi:i,kitchen:o,accessibility:l,airConditioner:u,secured:d,fastFood:j,parking:h,aidKit:p,publicTransport:b,handleChange:this.handleChange,onFilter:this.onFilter})]})]})}}]),n}(r.Component);var De={setFilter:U,getStays:M},Ae=Object(O.b)((function(e){return{filterBy:e.stayModule.filterBy}}),De)(Ce),_e=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onSetFilter=function(t){e.props.getStays(t)},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.getStays(this.props.filterBy)}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("header-home-mode-open"),document.body.classList.remove("header-onclick-mode")}},{key:"render",value:function(){var e=this.props.stays;return e?Object(T.jsxs)("section",{className:"stay-app ",children:[Object(T.jsx)(Ae,{onSetFilter:this.onSetFilter}),Object(T.jsx)(K,{stays:e})]}):Object(T.jsx)(J,{})}}]),n}(r.Component);var Me={getStays:M},Ue=Object(O.b)((function(e){return{stays:e.stayModule.stays,filterBy:e.stayModule.filterBy}}),Me)(_e);function Te(e){var t,n,r=e.type,s=e.houseRules;switch(r){case"Entire home":t="You\u2019ll have the whole compound to yourself.";break;case"Apartment":t="Private room, cuzy and sweet.";case"Studio":t="Enjoy private room with a lot of space.";break;case"Shared apartment":t="Sharing is caring, when individuals become a group."}return n=s.isSmoking&&s.isPets?"Host Allow smoking and pets in the compound.":s.isSmoking&&!s.isPets?"Host Allow smoking but pets is not a good idea.":"Host doesn\u2019t allow pets or smoking around the compound.",Object(T.jsxs)("div",{className:"about-asset-container",children:[Object(T.jsxs)("div",{children:[Object(T.jsx)(z.a,{icon:Y.i,size:"2x"}),Object(T.jsxs)("div",{children:[Object(T.jsx)("h4",{children:r}),Object(T.jsx)("p",{children:t})]})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)(z.a,{icon:Y.g,size:"2x"}),Object(T.jsxs)("div",{children:[Object(T.jsx)("h4",{children:"Enhanced Clean"}),Object(T.jsx)("p",{children:"This host committed to Airdod's 5-step enhanced cleaning process."})]})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)(z.a,{icon:Y.b,size:"2x"}),Object(T.jsxs)("div",{children:[Object(T.jsx)("h4",{children:"House rules"}),Object(T.jsx)("p",{children:n})]})]})]})}var Ee=n(913),Ie=n(906),Pe=Object(Ie.a)((function(e){return{size:{width:e.spacing(7),height:e.spacing(7)}}}));function Fe(e){var t=e.url,n=Pe();return t||(t="https://100k-faces.glitch.me/random-image"),Object(T.jsx)(Ee.a,{className:n.size,src:t})}var Re=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={x:0,y:0},e.handleMouseMove=function(t){e.setState({x:t.clientX,y:t.clientY});var n=t.pageX-t.currentTarget.offsetLeft,r=t.pageY-t.currentTarget.offsetTop;t.currentTarget.style.cssText="\n            --mouse-x: ".concat(n,"; \n            --mouse-y: ").concat(r,";\n            ")},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.isReserveMode?"Reserve":"Check availability";return Object(T.jsx)("button",{className:"gradientBtn",onMouseMove:this.handleMouseMove,children:e})}}]),n}(r.Component),Le=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.adults,n=e.children;return Object(T.jsxs)("div",{className:"stay-guest-modal",children:[Object(T.jsxs)("div",{className:"flex justify-space-between align-center",children:[Object(T.jsx)("p",{children:"Adults"}),Object(T.jsxs)("div",{className:"change-adult flex align-center",children:[Object(T.jsx)("button",{name:"adults",value:t-1,onClick:this.props.handleChange,children:"-"}),Object(T.jsx)("div",{children:t}),Object(T.jsx)("button",{name:"adults",value:t+1,onClick:this.props.handleChange,children:"+"})]})]}),Object(T.jsxs)("div",{className:"flex justify-space-between align-center",children:[Object(T.jsx)("p",{children:"Children"}),Object(T.jsxs)("div",{className:"change-child flex align-center",children:[Object(T.jsx)("button",{name:"children",value:n-1,onClick:this.props.handleChange,children:"-"}),Object(T.jsx)("div",{children:n}),Object(T.jsx)("button",{name:"children",value:n+1,onClick:this.props.handleChange,children:"+"})]})]})]})}}]),n}(r.Component),Be=n(161),ze=n(107),Ye=n(17),He=n.n(Ye),qe={query:function(){return We.apply(this,arguments)},remove:function(e){try{return w("order/".concat(e))}catch(t){console.log("not authorized!",t)}},add:function(e,t,n){return Ke.apply(this,arguments)},update:function(e){return $e.apply(this,arguments)},calcDays:Ge};function We(){return(We=Object(u.a)(l.a.mark((function e(){var t,n=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{_id:null,type:"user"},e.prev=1,e.next=4,v("order",t);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.log("cant get orders",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function Ke(){return(Ke=Object(u.a)(l.a.mark((function e(t,n,r){var s,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Ge(t.startDate,t.endDate),a=n.price*s+5+10,c={createdAt:Date.now(),buyer:{_id:r._id,fullName:r.fullname,imgUrl:r.imgUrl},totalPrice:a,city:n.loc.city,startDate:t.startDate.format("YYYY-MM-DD"),endDate:t.endDate.format("YYYY-MM-DD"),guests:{adults:t.adults,children:t.children},stay:{_id:n._id,name:n.name,price:n.price},host:n.host,status:"pending"},e.next=5,g("order",c);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("order/".concat(t._id),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e,t){var n=He()(e.format("YYYY-MM-DD"));return He()(t.format("YYYY-MM-DD")).diff(n,"days")+1}function Je(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.query(e);case 3:r=t.sent,n({type:"SET_ORDERS",orders:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("OrderActions: err in getOrders",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var Ve=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={trip:{startDate:"",endDate:"",adults:1,children:0},filterBy:{guest:1},isModalOpen:!1,isReserveMode:!1},e.handleSubmit=function(t){t.preventDefault();var n=e.state.trip,r=n.startDate,s=n.endDate,a=e.props,c=a.loggedInUser,i=a.stay;if(r&&""!==r&&s&&!e.state.isReserveMode)e.setState(Object(I.a)(Object(I.a)({},e.state),{},{isReserveMode:!0}));else if(r&&r&&e.state.isReserveMode){e.props.enqueueSnackbar("Your order received.",{variant:"success"}),setTimeout((function(){return e.props.closeSnackbar()}),3e3);var o=Object(I.a)({},e.state.trip);e.props.addOrder(o,i,c);var l=i.host._id;pe.emit("ORDER_OUT",{hostId:l,stay:i}),window.location.hash="/"}else e.props.enqueueSnackbar("Please enter all fields.",{variant:"error"}),setTimeout((function(){return e.props.closeSnackbar()}),3e3)},e.onOpenModal=function(t){t.preventDefault(),e.setState({isModalOpen:!0})},e.onCloseModal=function(t){t.preventDefault(),e.setState({isModalOpen:!1})},e.handleChange=function(t){t.preventDefault();var n=t.target,r=n.name,s=n.value;e.setState(Object(I.a)(Object(I.a)({},e.state),{},{trip:Object(I.a)(Object(I.a)({},e.state.trip),{},Object(Z.a)({},r,+s))}))},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props.stay,n=this.state,r=n.isModalOpen,s=n.isReserveMode,a=this.state.trip,c=a.adults,i=a.children,o=a.startDate,l=a.endDate,u=1;return t?(o&&l&&(u=qe.calcDays(o,l)),Object(T.jsxs)("section",{className:"stay-book-modal",children:[Object(T.jsxs)("div",{className:"modal-header",children:[Object(T.jsxs)("p",{children:[Object(T.jsxs)("span",{className:"price",children:["$",t.price]})," / night"]}),Object(T.jsx)(H,{stay:t})]}),Object(T.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(T.jsx)("span",{className:"check",children:"CHECK IN"}),Object(T.jsx)("span",{className:"check",children:"CHECK OUT"}),Object(T.jsxs)("div",{className:"form-select",children:[Object(T.jsx)("div",{className:"date-container",children:Object(T.jsx)(Be.DateRangePicker,{readOnly:!0,displayFormat:"MM-DD-YYYY",startDateId:"your_unique_start_date_id",startDate:this.state.trip.startDate,endDate:this.state.trip.endDate,endDateId:"your_unique_end_date_id",onDatesChange:function(t){var n=t.startDate,r=t.endDate;return e.setState(Object(I.a)(Object(I.a)({},e.state),{},{trip:Object(I.a)(Object(I.a)({},e.state.trip),{},{startDate:n,endDate:r})}))},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},startDatePlaceholderText:"Add date",endDatePlaceholderText:"Add date",noBorder:!0,inputIconPosition:"after",small:!0})}),Object(T.jsxs)("div",{className:"guest-container",children:[Object(T.jsx)("span",{className:"guests",children:"GUESTS"}),Object(T.jsx)("button",{className:"btn-guests",onClick:this.onOpenModal,children:this.state.trip.adults+this.state.trip.children}),r&&Object(T.jsx)(ve.a,{onClickAway:this.onCloseModal,children:Object(T.jsx)(Le,{handleChange:this.handleChange,adults:c,children:i})})]})]}),Object(T.jsx)(Re,{isReserveMode:s}),s&&Object(T.jsxs)("div",{className:"reserve-mode",children:[Object(T.jsx)("p",{children:"You won't be charged yet"}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("span",{children:["$",t.price," x ",u," nights"]}),Object(T.jsxs)("span",{children:["$",t.price*u]})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("span",{children:"Service fee"}),Object(T.jsx)("span",{children:"$5"})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("span",{children:"Occupancy taxes and fees"}),Object(T.jsx)("span",{children:"$10"})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("span",{children:"Total"}),Object(T.jsxs)("span",{children:["$",t.price*u+5+10]})]})]})]})]})):Object(T.jsx)("p",{children:"Loading"})}}]),n}(r.Component);var Xe={addOrder:function(e,t,n){return function(){var r=Object(u.a)(l.a.mark((function r(s){var a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,qe.add(e,t,n);case 3:a=r.sent,s({type:"ADD_ORDER",order:a}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log("OrderActions: err in addOrder",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}},Qe=Object(O.b)((function(e){return{loggedInUser:e.userModule.loggedInUser}}),Xe)(Object(ze.b)(Ve));function Ze(e){var t=e.amenities,n=t.accessibility,r=t.aidKit,s=t.airConditioner,a=t.fastFood,c=t.kitchen,i=t.parking,o=t.publicTransport,l=t.secured,u=t.tv,d=t.wifi;return Object(T.jsxs)("div",{className:"amenities-container flex column",children:[Object(T.jsx)("h2",{children:"Amenities"}),Object(T.jsxs)("div",{className:"flex",children:[Object(T.jsxs)("div",{className:"flex column",children:[Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!l&&"missing"," first"),children:[Object(T.jsx)(z.a,{icon:Y.m,size:"2x"}),Object(T.jsx)("span",{children:"Compound is perfectly secured."})]}),Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!d&&"missing"," first"),children:[Object(T.jsx)(z.a,{icon:Y.u,size:"2x"}),Object(T.jsx)("span",{children:"Free Wi-fi."})]}),Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!i&&"missing"," first"),children:[Object(T.jsx)(z.a,{icon:Y.j,size:"2x"}),Object(T.jsx)("span",{children:"Free street parking."})]}),Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!o&&"missing"," first"),children:[Object(T.jsx)(z.a,{icon:Y.d,size:"2x"}),Object(T.jsx)("span",{children:"Public Transport on the street."})]}),Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!a&&"missing"," first"),children:[Object(T.jsx)(z.a,{icon:Y.k,size:"2x"}),Object(T.jsx)("span",{children:"Very close to fast food stores."})]})]}),Object(T.jsxs)("div",{className:"flex column second",children:[Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!c&&"missing"),children:[Object(T.jsx)(z.a,{icon:Y.s,size:"2x"}),Object(T.jsx)("span",{children:"Kitchen."})]}),Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!n&&"missing"),children:[Object(T.jsx)(z.a,{icon:Y.t,size:"2x"}),Object(T.jsx)("span",{children:"Accessibility services."})]}),Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!s&&"missing"),children:[Object(T.jsx)(z.a,{icon:Y.n,size:"2x"}),Object(T.jsx)("span",{children:"Air conditioner, hot and cold."})]}),Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!u&&"missing"),children:[Object(T.jsx)(z.a,{icon:Y.q,size:"2x"}),Object(T.jsx)("span",{children:"TV with standard cable."})]}),Object(T.jsxs)("div",{className:"amenity-container flex align-center ".concat(!r&&"missing"),children:[Object(T.jsx)(z.a,{icon:Y.c,size:"2x"}),Object(T.jsx)("span",{children:"Aid kit for emergency."})]})]})]})]})}var et=n(910),tt=n(908),nt=n(212),rt=n.n(nt);rt.a.setAppElement("#root");var st=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={modalIsOpen:!1,review:{rate:null,summary:""}},e.handleChange=function(t){var n=t.target.name,r="rate"===t.target.name?+t.target.value:t.target.value;e.setState({review:Object(I.a)(Object(I.a)({},e.state.review),{},Object(Z.a)({},n,r))})},e.onAddReview=function(e){e.preventDefault()},e.closeModal=function(t){t.x>495&&t.x<1023||e.setState({modalIsOpen:!1})},e.openModal=function(){e.setState({modalIsOpen:!0})},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.reviews,r=t.stay,s=n.slice(0,4);return Object(T.jsxs)("div",{className:"reviews-container",children:[Object(T.jsx)(H,{stay:r,isShowReviews:!0}),Object(T.jsx)("div",{children:n&&s.map((function(t,n){return Object(T.jsxs)("div",{className:"review-container flex column",children:[Object(T.jsxs)("div",{className:"review-writer-container flex align-center",children:[Object(T.jsx)("div",{children:Object(T.jsx)(Fe,{url:t.by.imgUrl})}),Object(T.jsxs)("div",{className:"review-writer flex column",children:[Object(T.jsx)("span",{children:t.by.fullname}),Object(T.jsx)("span",{children:e.state.curTime})]})]}),Object(T.jsx)("div",{children:Object(T.jsx)("p",{children:t.txt})})]},n)}))}),Object(T.jsx)("button",{onClick:this.openModal,children:"Add review"}),Object(T.jsxs)(rt.a,{isOpen:this.state.modalIsOpen,className:"review-modal",overlayClassName:"review-modal-overlay",children:[Object(T.jsx)("h2",{children:"Add review"}),Object(T.jsxs)("div",{className:"review-writer-modal flex align-center",children:[Object(T.jsx)("div",{children:Object(T.jsx)(Fe,{})}),Object(T.jsx)("div",{className:"review-writer-modal-details flex column",children:Object(T.jsx)("span",{children:"Asi ho gaon"})})]}),Object(T.jsx)(ve.a,{onClickAway:this.closeModal,children:Object(T.jsxs)("form",{children:[Object(T.jsxs)(tt.a,{className:"flex column",component:"fieldset",mb:3,borderColor:"transparent",children:[Object(T.jsx)("label",{className:"rating-box-label",htmlFor:"review-rating",children:"Rate the host:"}),Object(T.jsx)(et.a,{id:"review-rating",name:"rate",value:this.state.review.rate,onChange:this.handleChange})]}),Object(T.jsxs)("div",{className:"flex column",children:[Object(T.jsx)("label",{htmlFor:"review-textarea",children:"Summary:"}),Object(T.jsx)("textarea",{id:"review-textarea",onChange:this.handleChange,type:"text",name:"summary",value:this.state.review.summary,placeholder:"Describe your expirience."})]}),Object(T.jsx)("button",{onClick:this.onAddReview,className:"add-review-btn",children:"Add"})]})}),Object(T.jsx)("button",{className:"exit-modal-btn",onClick:this.closeModal,children:Object(T.jsx)(z.a,{icon:Y.p,size:"2x"})})]})]})}}]),n}(r.Component),at=n(130),ct=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={style:{maxWidth:"1280px",height:"500px",overflowX:"hidden",overflowY:"hidden"},pos:{lat:32.109333,lng:34.855499}},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.loc,t={lat:e.lat,lng:e.lng};this.setState({pos:t})}},{key:"render",value:function(){return Object(T.jsx)("div",{className:"map-container flex",children:Object(T.jsxs)(at.Map,{google:this.props.google,zoom:13,initialCenter:{lat:13.736717,lng:100.523186},center:this.state.pos,style:this.state.style,children:[Object(T.jsx)(at.Marker,{position:this.state.pos,name:"branch location"}),Object(T.jsx)(at.InfoWindow,{})]})})}}]),n}(r.Component),it=Object(at.GoogleApiWrapper)({apiKey:"AIzaSyCjIexPtvV4Y3_C8J8NR1yfnrQr5s1LibY"})(ct),ot=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={stay:{},isShowMore:!1},e.isOverChars=function(e){return e.length>=150},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.setStayDetails(),window.scrollTo(0,0),document.body.classList.add("mini-header"),document.body.classList.remove("hide-mini-search")}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("header-home-mode-open"),document.body.classList.remove("header-onclick-mode")}},{key:"setStayDetails",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,S.getById(t);case 3:n=e.sent,this.setState({stay:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.stay,n=t.loc,r=t.name,s=t.type,a=t.host,c=t.imgUrls,i=t.capacity,o=t.houseRules,l=t.amenities,u=t.summary,d=t.reviews;return t?Object(T.jsxs)("section",{className:"stay-details-container",children:[Object(T.jsxs)("div",{className:"details-header-container",children:[Object(T.jsx)("h1",{children:r}),Object(T.jsxs)("div",{className:"details-header-details flex justify-space-between",children:[Object(T.jsxs)("div",{className:"details-header-desc flex",children:[Object(T.jsx)(H,{stay:t,isShowReviews:!0}),Object(T.jsx)("span",{className:"details-header-dot",children:"\xb7"}),n&&Object(T.jsx)("a",{className:"details-header-tags",children:n.address})]}),Object(T.jsxs)("button",{className:"details-header-save flex align-center",children:[Object(T.jsx)(z.a,{icon:Y.h}),"Save"]})]})]}),c&&Object(T.jsx)("div",{className:"details-gallery-container",children:c.map((function(e,t){return Object(T.jsx)("div",{className:"details-img-container img-".concat(t+1),children:Object(T.jsx)("img",{src:e,alt:"details"})},t)}))}),Object(T.jsxs)("section",{className:"host-main-container justify-space-between flex",children:[Object(T.jsxs)("div",{className:"flex full column",children:[a&&Object(T.jsxs)("div",{className:"host-header-container flex",children:[Object(T.jsxs)("div",{className:"flex column full",children:[Object(T.jsxs)("h2",{children:[s," hosted by ",a.fullname]}),Object(T.jsxs)("span",{className:"host-header-capacity",children:["Up to ",i," guests"]})]}),Object(T.jsx)("div",{children:Object(T.jsx)(Fe,{})})]}),Object(T.jsx)("div",{children:o&&Object(T.jsx)(Te,{type:s,houseRules:o})}),u&&Object(T.jsxs)("div",{className:"about-asset-desc",children:[this.state.isShowMore?Object(T.jsx)("p",{children:u}):Object(T.jsx)(q,{txt:u,numOfChars:150}),this.isOverChars(u)&&Object(T.jsxs)("button",{onClick:function(){e.setState({isShowMore:!e.state.isShowMore})},children:[this.state.isShowMore?"Show Less":"Show more",Object(T.jsx)(z.a,{icon:Y.f})]})]}),l&&Object(T.jsx)("div",{children:Object(T.jsx)(Ze,{amenities:l})})]}),Object(T.jsx)("div",{className:"staybook-modal-container",children:Object(T.jsx)(Qe,{stay:t})})]}),Object(T.jsx)("section",{children:d&&Object(T.jsx)(st,{stay:t,reviews:d})}),n&&Object(T.jsxs)("section",{className:"google-map-container",children:[Object(T.jsx)("h2",{children:"Location"}),Object(T.jsx)("span",{children:n.address}),Object(T.jsx)(it,{loc:n})]})]}):Object(T.jsx)(J,{})}}]),n}(r.Component);function lt(){return Object(T.jsx)("section",{children:Object(T.jsx)("p",{children:"Add Stay"})})}function ut(){return Object(T.jsx)("section",{children:Object(T.jsx)("p",{children:"User Stays"})})}function dt(){return Object(T.jsx)("section",{children:Object(T.jsx)("p",{children:"HostHomes"})})}function jt(){return Object(T.jsx)("section",{children:Object(T.jsx)("p",{children:"Wishlist"})})}function ht(e){var t=e.order,n=e.updateOrder,r=t.guests.adults+t.guests.children,s=t.buyer.imgUrl?t.buyer.imgUrl:"https://ozgrozer.github.io/100k-faces/0/0/000924.jpg";function a(e){var r=Object(I.a)({},t);r.status=e.target.name,n(r),pe.emit("ORDER_STATUS",r)}return Object(T.jsxs)("div",{className:"host-order-preview flex",children:[Object(T.jsx)("div",{className:"img-container",children:Object(T.jsx)("img",{src:s,alt:"user"})}),Object(T.jsxs)("div",{className:"order-content",children:[Object(T.jsxs)("h3",{children:["Requested by: ",t.buyer.fullName]}),Object(T.jsx)("p",{children:"Expire in 12 hours"}),Object(T.jsxs)("p",{children:[r," guests - ",t.startDate," - ",t.endDate," -",Object(T.jsxs)("span",{children:[" ",t.stay.name]})]})]}),"pending"===t.status&&Object(T.jsxs)("p",{children:[Object(T.jsx)("button",{className:"accepted",name:"accepted",onClick:a,children:"Accept"})," / ",Object(T.jsx)("button",{className:"rejected",name:"rejected",onClick:a,children:"Reject"})]}),"pending"!==t.status&&Object(T.jsx)("p",{className:t.status,children:t.status})]})}function pt(e){var t=e.hostOrders,n=e.updateOrder;return t?Object(T.jsx)("section",{children:t.map((function(e){return Object(T.jsx)(ht,{order:e,updateOrder:n},e._id)}))}):Object(T.jsx)("h1",{children:"Loading..."})}function bt(e){var t=e.stays,n=e.orders;function r(e){return n.filter((function(t){return t.status===e})).length}function s(){var e=new Date(Date.now());return n.filter((function(t){var n=new Date(t.startDate),r=new Date(t.endDate);return n<e&&r>e}))}return console.log("stays",t,"orders",n),Object(T.jsxs)("section",{className:"dashboard-header flex",children:[Object(T.jsxs)("div",{children:[Object(T.jsx)("h3",{children:"Orders"}),Object(T.jsxs)("div",{className:"orders-status-container flex",children:[Object(T.jsx)("p",{children:Object(T.jsx)("span",{children:n.length})}),Object(T.jsxs)("div",{className:"status-circles flex",children:[Object(T.jsx)("p",{title:"pending",className:"pending circle",children:r("pending")}),Object(T.jsx)("p",{title:"accepted",className:"accepted circle",children:r("accepted")}),Object(T.jsx)("p",{title:"rejected",className:"rejected circle",children:r("rejected")})]})]})]}),Object(T.jsxs)("div",{className:"flex column",children:[Object(T.jsx)("h3",{children:"Total rate"}),Object(T.jsxs)("div",{className:"rate flex",children:[Object(T.jsx)(z.a,{icon:Y.o,color:"#FF385C",className:"star-icon"}),Object(T.jsx)("span",{children:function(){var e=0;return t.forEach((function(t){var n=t.reviews.map((function(e){return e.rate})),r=n.reduce((function(e,t){return e+t}),0);e+=r/n.length})),e/t.length?(e/t.length).toFixed(1):0}()})]})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("h3",{children:"Monthly earning"}),Object(T.jsx)("p",{children:Object(T.jsxs)("span",{children:["$",function(){var e=0,t=new Date(Date.now()).getMonth()+1,r=new Date(Date.now()).getFullYear();return n.forEach((function(n){var s=new Date(n.startDate).getMonth()+1,a=new Date(n.startDate).getFullYear();t===s&&r===a&&(e+=n.totalPrice)})),e.toLocaleString("en-US")}()]})})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("h3",{children:"Active guests"}),Object(T.jsxs)("div",{className:"active-users flex",children:[Object(T.jsx)("span",{children:s().length}),Object(T.jsx)("div",{className:"images-container flex",children:s().map((function(e){return Object(T.jsx)("div",{className:"img-container",children:Object(T.jsx)("img",{src:e.buyer.imgUrl,alt:"guest"},e._id)})}))})]})]})]})}var Ot=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.loggedInUser._id;this.props.getOrders(e,"user")}},{key:"render",value:function(){var e=this.props,t=e.loggedInUser,n=e.orders,r=e.stays,s=e.updateOrder,a=t.isHost,c=n.filter((function(e){return e.host._id===t._id}));c=c.sort((function(e,t){return t.createdAt-e.createdAt}));var o=r.filter((function(e){return e.host._id===t._id}));return o=o.sort((function(e,t){return t.createdAt-e.createdAt})),Object(T.jsxs)("section",{className:"user-profile",children:[Object(T.jsxs)("aside",{children:[a&&Object(T.jsx)(i.c,{activeClassName:"user-aside-active",to:"/userprofile/orders",children:"Orders"}),a&&Object(T.jsx)(i.c,{activeClassName:"user-aside-active",to:"/userprofile/myhomes",children:"My Homes"}),a&&Object(T.jsx)(i.c,{activeClassName:"user-aside-active",to:"/userprofile/add",children:"Add stay"}),Object(T.jsx)(i.c,{activeClassName:"user-aside-active",to:"/userprofile/mystays",children:"My Stays"})]}),Object(T.jsxs)("main",{children:[Object(T.jsx)(bt,{stays:o,orders:c}),Object(T.jsxs)(b.c,{children:[Object(T.jsx)(b.a,{exact:!0,path:"/userprofile/add",component:lt}),Object(T.jsx)(b.a,{exact:!0,path:"/userprofile/myhomes",component:dt}),Object(T.jsx)(b.a,{exact:!0,path:"/userprofile/mystays",component:ut}),Object(T.jsx)(b.a,{exact:!0,path:"/userprofile/wishlist",component:jt}),Object(T.jsx)(b.a,{exact:!0,path:"/userprofile/orders",render:function(e){return Object(T.jsx)(pt,Object(I.a)(Object(I.a)({},e),{},{hostOrders:c,updateOrder:s}))}})]})]})]})}}]),n}(r.Component);var ft={getStays:M,getUsers:function(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,te.getUsers();case 4:n=e.sent,t({type:"SET_USERS",users:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 11:return e.prev=11,t({type:"LOADING_DONE"}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()},getOrders:Je,updateOrder:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.update(e);case 3:r=t.sent,n({type:"UPDATE_ORDER",order:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("OrderActions: err in update Order",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},xt=Object(O.b)((function(e){return{loggedInUser:e.userModule.loggedInUser,orders:e.orderModule.orders,stays:e.stayModule.stays}}),ft)(Ot);var mt=Object(O.b)((function(e){return{stays:e.stayModule.stays}}))((function(e){var t,n,r=e.order,s=e.stays,a=(t=r.stay._id,s.find((function(e){return t===e._id}))),c=function(){var e;"accepted"===r.status?(e="Order accepted",n="accepted"):"rejected"===r.status?(e="Order rejected",n="rejected"):(e="Waiting for approval",n="pending");return e}();return a?Object(T.jsx)("section",{className:"user-order-preview",children:Object(T.jsxs)(i.b,{to:"stay/".concat(a._id),children:[Object(T.jsx)("div",{className:"img-container",children:Object(T.jsx)("img",{src:a.imgUrls[0],alt:"home"})}),Object(T.jsxs)("div",{className:"info",children:[Object(T.jsxs)("p",{className:"dates",children:[r.startDate," - ",r.endDate]}),Object(T.jsx)("p",{className:"stay-name",children:r.stay.name}),Object(T.jsx)("p",{className:n+" order-status",children:c})]})]})}):Object(T.jsx)("h1",{})})),vt=n.p+"static/media/trip.a90c384c.png",gt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).getUserOrders=function(){var t=e.props.orders,n=e.props.loggedInUser;return t.filter((function(e){return e.buyer._id===n._id})).sort((function(e,t){return t.createdAt-e.createdAt}))},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.loggedInUser._id;this.props.getOrders(e,"user"),this.props.getStays()}},{key:"render",value:function(){var e=this.getUserOrders();return e?Object(T.jsxs)("section",{className:"stay-trips",children:[Object(T.jsx)("h1",{children:"Trips"}),Object(T.jsx)("div",{className:"preview-container",children:e.map((function(e){return Object(T.jsx)(mt,{order:e},e._id)}))}),Object(T.jsx)("div",{children:Object(T.jsx)("img",{src:vt,alt:"order"})})]}):Object(T.jsx)("h1",{children:"Loading"})}}]),n}(r.Component);var yt={getOrders:Je,getStays:M},wt=[{path:"/stay/:id",component:ot},{path:"/stay",component:Ue},{path:"/login",component:fe},{path:"/signup",component:fe},{path:"/userprofile",component:xt},{path:"/trips",component:Object(O.b)((function(e){return{loggedInUser:e.userModule.loggedInUser,orders:e.orderModule.orders,stays:e.stayModule.stays}}),yt)(gt)},{path:"/",component:Q}],kt=(n(551),n(601),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={filterBy:{city:"",guest:0}},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value,a=e.state.filterBy;e.setState({filterBy:Object(I.a)(Object(I.a)({},a),{},Object(Z.a)({},r,s))})},e.onSubmitStay=function(t){t.preventDefault();var n=e.state.filterBy,r=n.city,s=n.guest,a=e.state,c=a.startDate,i=a.endDate,o={startDate:(null===c||void 0===c?void 0:c._d)||"",endDate:(null===i||void 0===i?void 0:i._d)||"",city:r,guest:+s};e.props.getStays(o)},e.handleSearchMini=function(){document.body.classList.add("header-onclick-mode"),document.addEventListener("mouseup",e.closeHeaderOnclickMode)},e.closeHeaderOnclickMode=function(t){e.props.node.current.contains(t.target)||(document.body.classList.remove("header-onclick-mode"),document.removeEventListener("mouseup",e.closeHeaderOnclickMode))},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props.filterBy.city;return Object(T.jsxs)("section",{className:"stay-search flex align-center",children:[Object(T.jsxs)("div",{className:"search-mini",onClick:this.handleSearchMini,children:[t||"Start your search",Object(T.jsx)(z.a,{icon:Y.l})]}),Object(T.jsxs)("form",{className:"flex",onSubmit:this.onSubmitStay,children:[Object(T.jsxs)("div",{className:"search-input country-input flex column justify-center",children:[Object(T.jsx)("div",{className:"location-label",children:Object(T.jsx)("label",{htmlFor:"location",children:"Location"})}),Object(T.jsx)("div",{className:"city",children:Object(T.jsx)("input",{onChange:this.handleChange,autoComplete:"off",type:"text",name:"city",id:"location",placeholder:t||"Where are you going?"})})]}),Object(T.jsx)("div",{className:"separator-vertical"}),Object(T.jsxs)("div",{className:"search-input date-input flex column justify-center",children:[Object(T.jsx)("div",{className:"dates-label",children:Object(T.jsx)("label",{children:"Dates"})}),Object(T.jsx)(Be.DateRangePicker,{startDateId:"your_unique_start_date_id",startDate:this.state.startDate,endDateId:"your_unique_end_date_id",endDate:this.state.endDate,onDatesChange:function(t){var n=t.startDate,r=t.endDate;return e.setState({startDate:n,endDate:r})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},startDatePlaceholderText:"Check in",endDatePlaceholderText:"Check out",noBorder:!0,inputIconPosition:"after",small:!0})]}),Object(T.jsx)("div",{className:"separator-vertical"}),Object(T.jsxs)("div",{className:"search-input guest-input flex column justify-center",children:[Object(T.jsx)("div",{className:"guests-label",children:Object(T.jsx)("label",{htmlFor:"guest",children:"Guests"})}),Object(T.jsx)("div",{className:"guest-input",children:Object(T.jsx)("input",{onChange:this.handleChange,autoComplete:"off",type:"text",name:"guest",id:"guest",placeholder:"1 guest"})})]}),Object(T.jsx)("button",{children:Object(T.jsx)(z.a,{icon:Y.l,size:"2x"})})]})]})}}]),n}(r.Component));var Nt={getStays:M},St=Object(O.b)((function(e){return{filterBy:e.stayModule.filterBy}}),Nt)(kt),Ct=n(907),Dt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={node:s.a.createRef(),isOpen:!1,msgNum:0},e.onShowUserMenu=function(){e.setState({isOpen:!0})},e.onCloseUserMenu=function(){e.setState({isOpen:!1})},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.loggedInUser,n=e.onLogout,r=this.state.msgNum;return Object(T.jsx)("header",{className:"flex",ref:this.state.node,children:Object(T.jsxs)("nav",{className:"nav-header flex align-center",children:[Object(T.jsx)(i.c,{to:"/",children:Object(T.jsxs)("h1",{className:"logo",children:[Object(T.jsx)(z.a,{icon:Y.e,size:"2x"}),"Homie"]})}),Object(T.jsx)(St,{node:this.state.node}),Object(T.jsxs)("ul",{className:"nav-link clean-list flex align-center",children:[Object(T.jsx)("li",{children:Object(T.jsx)(i.c,{to:"/",children:"Become a host"})}),Object(T.jsx)("li",{children:Object(T.jsx)(i.c,{to:"/stay",children:"Explore"})}),Object(T.jsx)("li",{className:"flex align-center",children:Object(T.jsxs)("div",{className:"login-signup-btn flex align-center",onClick:this.onShowUserMenu,children:[Object(T.jsx)(z.a,{icon:Y.a,size:"2x"}),!t&&Object(T.jsx)(z.a,{icon:Y.r,size:"2x"}),t&&Object(T.jsx)("div",{className:"avatar-container",children:Object(T.jsx)(Ct.a,{badgeContent:r,color:"secondary",children:Object(T.jsx)(Fe,{url:t.imgUrl})})})]})})]}),this.state.isOpen&&Object(T.jsx)(ve.a,{onClickAway:this.onCloseUserMenu,children:Object(T.jsx)("div",{className:"user-modal flex",children:Object(T.jsxs)("ul",{className:"clean-list",children:[!t&&Object(T.jsx)(i.c,{onClick:this.onCloseUserMenu,to:"/login",children:Object(T.jsx)("li",{children:"Login"})}),t&&t.isHost&&Object(T.jsx)(i.c,{onClick:this.onCloseUserMenu,to:"/userprofile/orders",children:Object(T.jsx)("li",{children:"Profile"})}),t&&Object(T.jsx)(i.c,{onClick:this.onCloseUserMenu,to:"/trips",children:Object(T.jsx)("li",{children:"Trips"})}),Object(T.jsxs)("li",{children:[t&&Object(T.jsx)(i.c,{onClick:n,to:"/",children:"Logout"}),!t&&Object(T.jsx)(i.c,{to:"/signup",children:"Signup"})]})]})})})]})})}}]),n}(r.Component);var At={onLogout:de},_t=Object(O.b)((function(e){return{loggedInUser:e.userModule.loggedInUser}}),At)(Dt);function Mt(){return Object(T.jsx)("footer",{children:Object(T.jsx)("p",{children:"\xa9 2021 Homie, Inc. All rights reserved"})})}n(602);var Ut=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.getStays(this.props.filterBy),e.next=3,pe.setup();case 3:pe.on("ORDER_IN",(function(e){t.props.enqueueSnackbar("".concat(e,", you have a new order."),{variant:"success"})})),pe.on("STATUS_FROM_HOST",(function(e){var n="accepted"===e?"success":"eror";t.props.enqueueSnackbar("your order has been ".concat(e,"."),{variant:n})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){pe.terminate()}},{key:"render",value:function(){return this.props.stays?Object(T.jsxs)("div",{className:"app main-container",children:[Object(T.jsx)(_t,{}),Object(T.jsx)(b.c,{children:wt.map((function(e){return Object(T.jsx)(b.a,{component:e.component,path:e.path},e.path)}))}),Object(T.jsx)(Mt,{})]}):Object(T.jsx)(J,{})}}]),n}(r.Component);var Tt={getStays:M},Et=Object(O.b)((function(e){return{stays:e.stayModule.stays,filterBy:e.stayModule.filterBy}}),Tt)(Object(ze.b)(Ut)),It=n(131),Pt=n(361),Ft=n(33),Rt={stays:[],filterBy:{}};var Lt={_id:"60bf2d7dc508494d34eaae90",username:"Alex",fullname:"Alex",imgUrl:"https://ozgrozer.github.io/100k-faces/0/7/007489.jpg",isHost:!0};sessionStorage.loggedinUser&&(Lt=JSON.parse(sessionStorage.loggedinUser));var Bt={loggedInUser:Lt,users:[]};var zt={orders:[]};var Yt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||It.c,Ht=Object(It.b)({stayModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STAYS":return Object(I.a)(Object(I.a)({},e),{},{stays:t.stays});case"ADD_STAY":return Object(I.a)(Object(I.a)({},e),{},{stays:[t.stay].concat(Object(Ft.a)(e.stays))});case"UPDATE_STAY":return Object(I.a)(Object(I.a)({},e),{},{stays:[t.stay].concat(Object(Ft.a)(e.stays.filter((function(e){return t.stay._id!==e._id}))))});case"REMOVE_STAY":return Object(I.a)(Object(I.a)({},e),{},{stays:e.stays.filter((function(e){return e._id!==t.stayId}))});case"SET_FILTER":return Object(I.a)(Object(I.a)({},e),{},{filterBy:Object(I.a)(Object(I.a)({},e.filterBy),t.filterBy)});default:return e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(I.a)(Object(I.a)({},e),{},{loggedInUser:t.user});case"REMOVE_USER":return Object(I.a)(Object(I.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(I.a)(Object(I.a)({},e),{},{users:t.users});default:return e}},orderModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ORDERS":return Object(I.a)(Object(I.a)({},e),{},{orders:t.orders});case"ADD_ORDER":return Object(I.a)(Object(I.a)({},e),{},{orders:[t.order].concat(Object(Ft.a)(e.orders))});case"UPDATE_ORDER":return Object(I.a)(Object(I.a)({},e),{},{orders:[t.order].concat(Object(Ft.a)(e.orders.filter((function(e){return t.order._id!==e._id}))))});case"REMOVE_ORDER":return Object(I.a)(Object(I.a)({},e),{},{orders:e.orders.filter((function(e){return e._id!==t.orderId}))});default:return e}}}),qt=Object(It.d)(Ht,Yt(Object(It.a)(Pt.a))),Wt=n(911),Kt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,916)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};c.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(O.a,{store:qt,children:Object(T.jsx)(i.a,{children:Object(T.jsx)(ze.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Wt.a,preventDuplicate:!0,maxSnack:1,children:Object(T.jsx)(Et,{})})})})}),document.getElementById("root")),Kt()}},[[887,1,2]]]);
//# sourceMappingURL=main.4c1d67ef.chunk.js.map